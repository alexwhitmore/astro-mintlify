---
import { getCollection, type CollectionEntry } from 'astro:content'
import DocumentationLayout from '../../layouts/DocumentationLayout.astro'

export async function getStaticPaths() {
  const collections = ['getting-started', 'essentials', 'guides'] as const
  return collections.map((collection) => ({
    params: { type: collection },
  }))
}

const { type } = Astro.params
let pages: CollectionEntry<'getting-started' | 'essentials' | 'guides'>[] = []

if (type === 'getting-started' || type === 'essentials' || type === 'guides') {
  pages = await getCollection(type)
}
---

<DocumentationLayout title={`${type} Documentation`} toc={[]}>
  <h1>{type} Documentation</h1>
  <ul>
    {
      pages.map((page) => (
        <li>
          <a href={`/${type}/${page.slug}`}>{page.data.title}</a>
        </li>
      ))
    }
  </ul>
</DocumentationLayout>
