---
title: 'Managing Updates'
date: '2024-06-28'
description: 'Learn how to manage updates for Node.js, the Epic Stack, and NPM dependencies in your project.'
draft: false
type: 'miscellaneous'
---

import GroupName from '../../components/docs/GroupName.astro'
import ExternalLink from '../../components/docs/ExternalLink.astro'
import CodeBlock from '../../components/docs/CodeBlock.astro'

<GroupName>Miscellaneous</GroupName>

# Managing Updates

## Updating Node.js

The Epic Stack runs a long-running Node.js server. It defaults to the current active LTS version of node (<ExternalLink url='./decisions/021-node-version.md'>read the Node.js version decision document</ExternalLink>).

To change the Node.js version:

1. Update the `engines.node` property in the `package.json` file:

<CodeBlock
  code={`{
  "engines": {
    "node": "20.3.1"
  }
}`}
  lang='json'
/>

2. Update the `Dockerfile` to use the same version:

<CodeBlock
  code={`- FROM node:18-bookworm-slim as base
+ FROM node:20.3.1-bookworm-slim as base`}
  lang='diff'
/>

Find available Node.js versions on <ExternalLink url='https://hub.docker.com/_/node'>Docker Hub</ExternalLink>.

## Within the Epic Stack

When you create a new project with the Epic Stack, the generated code is yours to modify. While this allows for customization, it means you'll need to manually incorporate any improvements made to the Epic Stack template.

Don't feel pressured to keep up with every change. Adopt updates as needed. You can review <ExternalLink url='https://github.com/epicweb-dev/epic-stack/commits/main'>the Epic Stack's commit history</ExternalLink> to see potential updates.

Check the `epic-stack` field in the `package.json` file to see the date and commit hash of your project's creation.

## How to update NPM dependencies

Updating dependencies is crucial for new features, bug fixes, and security patches. <ExternalLink url='https://www.npmjs.com/package/npm-check-updates'>NPM Check Updates</ExternalLink> can help with this process. Watch <ExternalLink url='https://www.youtube.com/watch?v=0XQXGx3lLaU'>this youtube video</ExternalLink> for a demonstration.

### See a list of packages that can be updated

<CodeBlock code={`npx npm-check-updates`} lang='bash' />

Color coding:

- Green: patch updates
- Cyan: minor updates
- Red: major or version zero updates

### Update green patch versions first, all at once

<CodeBlock
  code={`npx npm-check-updates -u --target patch
npm i`}
  lang='bash'
/>

Run tests after updating:

<CodeBlock
  code={`npm run test -- run
npm run test:e2e:run`}
  lang='bash'
/>

Commit changes if tests pass:

<CodeBlock
  code={`git add .
git commit -m "Updated patch versions"`}
  lang='bash'
/>

### Update cyan minor versions second, one by one

<CodeBlock
  code={`npx npm-check-updates -u --filter <package-with-cyan-minor-update>
npm i`}
  lang='bash'
/>

Run tests and commit changes:

<CodeBlock
  code={`npm run test -- run
npm run test:e2e:run
git add .
git commit -m "Updated minor versions"`}
  lang='bash'
/>

### Update red versions third, one by one

<CodeBlock
  code={`npx npm-check-updates -u -f <package-with-red-version-update>
npm i`}
  lang='bash'
/>

Make necessary changes, run tests, and commit:

<CodeBlock
  code={`npm run test -- run
npm run test:e2e:run
git add .
git commit -m "Updated <package-with-red-version-update> major version"`}
  lang='bash'
/>

Continue this process for each package requiring updates.
