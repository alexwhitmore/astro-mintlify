---
title: 'Troubleshooting'
date: '2024-06-28'
description: 'Common errors and their solutions for the Epic Stack.'
draft: false
type: 'miscellaneous'
---

import GroupName from '../../components/docs/GroupName.astro'
import ExternalLink from '../../components/docs/ExternalLink.astro'
import CodeBlock from '../../components/docs/CodeBlock.astro'

<GroupName>Miscellaneous</GroupName>

# Troubleshooting

This page documents common errors and how to fix them in the Epic Stack.

## Content Security Policy violations

If you've received an error like this:

> Refused to load the image 'https://example.com/thing.png' because it violates the following Content Security Policy directive: "img-src 'self'".

This means you're trying to add a link to a resource that is not allowed. Learn more about the decision to add this content security policy (CSP) in <ExternalLink url='./decisions/008-content-security-policy.md'>the decision document</ExternalLink>.

**NOTE:** This is disabled by default as of <ExternalLink url='./decisions/022-report-only-csp.md'>the report-only CSP decision</ExternalLink>. It is, however, recommended to be enabled for security reasons.

To fix this, adjust the CSP to allow the resource you're trying to add. This can be done in the `server/index.ts` file:

<CodeBlock
  code={`contentSecurityPolicy: {
  directives: {
    'connect-src': [
      MODE === 'development' ? 'ws:' : null,
      process.env.SENTRY_DSN ? '*.sentry.io' : null,
      "'self'",
    ].filter(Boolean),
    'font-src': ["'self'"],
    'frame-src': ["'self'"],
-   'img-src': ["'self'", 'data:'],
+   'img-src': ["'self'", 'data:', 'https://*.example.com']
`}
  lang='diff'
/>

## Missing Icons

Epic Stack uses SVG sprite icons for performance reasons. If you've received an error like this during local development:

> X [ERROR] Could not resolve "#app/components/ui/icon.tsx"

You need to manually regenerate the icon with:

<CodeBlock code={`npm run build:icons`} lang='bash' />

See <ExternalLink url='https://github.com/epicweb-dev/epic-stack/blob/main/docs/decisions/020-icons.md'>the icons decision document</ExternalLink> for more information about icons.
