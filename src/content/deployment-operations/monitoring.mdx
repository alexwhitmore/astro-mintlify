---
title: 'Monitoring'
date: '2024-06-28'
description: 'Learn how to set up Sentry for error, performance, and replay monitoring in your Epic Stack application.'
draft: false
type: 'deployment-ops'
---

import GroupName from '../../components/docs/GroupName.astro'
import CodeBlock from '../../components/docs/CodeBlock.astro'

<GroupName>Deployment & Operations</GroupName>

# Monitoring

This guide describes how to set up [Sentry](https://sentry.io/) as the monitoring provider for your Epic Stack application. Sentry offers error, performance, and replay monitoring capabilities.

> **NOTE**: This is an optional step and is only needed if you want monitoring in production.

## SaaS vs Self-Hosted

Sentry offers both a [SaaS solution](https://sentry.io/) and a [self-hosted solution](https://develop.sentry.dev/self-hosted/). This guide assumes you are using the SaaS option, but it can be adapted for self-hosted setups with some modifications.

## Signup

1. Sign up for Sentry and create a Remix project by visiting [this url](https://sentry.io/signup/?project_platform=javascript-remix).
2. Fill out the signup form to create your account and project.

## Setting up the sentry-vite plugin

1. On the onboarding page, locate and copy your DSN (this becomes `SENTRY_DSN`).
2. Set the Sentry DSN secret in Fly.io:

<CodeBlock code='fly secrets set SENTRY_DSN=<your_dsn>' lang='bash' />

3. Follow the [Remix guide](https://docs.sentry.io/platforms/javascript/guides/remix/) for Sentry setup. Note that some steps may already exist in the Epic Stack codebase, so be careful to remove any duplication.

4. Generate an auth token:

   - Create an [internal integration](https://sentry.io/orgredirect/settings/:orgslug/developer-settings/new-internal/).
   - Give it a name and add the scope for `Releases:Admin` and `Organization:Read`.
   - Generate the auth token and copy it (this becomes `SENTRY_AUTH_TOKEN`).

5. Collect additional information:

   - Copy the organization slug from the organization general settings page (`SENTRY_ORG`).
   - Copy the project slug from `Organization > Projects > Project > Name` (`SENTRY_PROJECT`).

6. Set up secrets in GitHub Actions:

   - Add `SENTRY_AUTH_TOKEN`, `SENTRY_ORG`, and `SENTRY_PROJECT` as [GitHub Actions secrets](https://docs.github.com/en/actions/security-guides/using-secrets-in-github-actions).

7. Update the Dockerfile:
   In the 'build' section of the [Dockerfile](../other/Dockerfile), there's an example of how to pass `SENTRY_AUTH_TOKEN`. You may also uncomment and hard code your `SENTRY_ORG` and `SENTRY_PROJECT` values.

<CodeBlock
  code={`# Example from Dockerfile
ARG SENTRY_AUTH_TOKEN
ENV SENTRY_AUTH_TOKEN=$SENTRY_AUTH_TOKEN
# ENV SENTRY_ORG=your-org-slug
# ENV SENTRY_PROJECT=your-project-slug`}
  lang='dockerfile'
/>

8. Configure the Sentry Vite plugin:
   The Sentry Vite plugin in [`vite.config.ts`](../vite.config.ts) will create Sentry releases and associate commits during the Vite build once the `SENTRY_AUTH_TOKEN` is set.

<CodeBlock
  code={`import { sentryVitePlugin } from '@sentry/vite-plugin'

export default defineConfig({
  plugins: [
    sentryVitePlugin({
      org: process.env.SENTRY_ORG,
      project: process.env.SENTRY_PROJECT,
      authToken: process.env.SENTRY_AUTH_TOKEN,
      release: {
        name: process.env.COMMIT_SHA,
      },
    }),
  ],
})`}
  lang="typescript"
/>

By following these steps, you'll have Sentry set up for monitoring your Epic Stack application, providing insights into errors, performance, and user experiences in production.
