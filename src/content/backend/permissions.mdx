---
title: 'Permissions'
date: '2024-06-28'
description: 'Learn about the Role-Based Access Control (RBAC) permissions model in the Epic Stack.'
draft: false
type: 'backend'
---

import GroupName from '../../components/docs/GroupName.astro'
import CodeBlock from '../../components/docs/CodeBlock.astro'

<GroupName>Backend</GroupName>

# Permissions

The Epic Stack implements a permissions model based on [Role-Based Access Control (RBAC)](https://auth0.com/intro-to-iam/what-is-role-based-access-control-rbac). This system provides a flexible and granular approach to managing user access within your application.

## How It Works

1. Each user has a set of roles.
2. Each role has a set of permissions.
3. A user's permissions are the union of all permissions from their roles.
4. When permissions conflict, the more permissive permission takes precedence.

## Default Permissions

The default development seed creates fine-grained permissions:

- Actions: `create`, `read`, `update`, and `delete`
- Resources: `user` and `note`
- Access levels: `own` and `any`

## Default Roles

The default seed also creates two roles with sensible permissions:

- `user`
- `admin`

You can combine these permissions in various ways to support different roles for different user personas in your application.

## Using Permissions

The Epic Stack provides built-in utilities for working with permissions:

### Server-Side Utilities

<CodeBlock
  code={`// server-side only utilities
const userCanDeleteAnyUser = await requireUserWithPermission(
  request,
  'delete:user:any',
)
const userIsAdmin = await requireUserWithRole(request, 'admin')`}
  lang='typescript'
/>

### UI Utilities

<CodeBlock
  code={`// UI utilities
const user = useUser()
const userCanCreateTheirOwnNotes = userHasPermission(user, 'create:note:own')
const userIsUser = userHasRole(user, 'user')`}
  lang='typescript'
/>

## Managing Permissions

Currently, there is no UI for managing permissions. You can use Prisma Studio to establish and manage permissions and roles.

## Seeding Production Database

For instructions on how to seed the production database with the roles you want, please refer to [the deployment docs](./deployment.md).

By leveraging this permissions model, you can create a secure and flexible access control system for your Epic Stack application, ensuring that users have appropriate access to resources based on their roles and specific permissions.
